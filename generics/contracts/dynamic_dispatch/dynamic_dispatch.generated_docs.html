<!DOCTYPE HTML>
<html lang="en" class="navy" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Dynamic Dispatch - The Claro Programming Language (DRAFT)</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../../custom_blocks.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('navy')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../chapter_1.html">Welcome to Claro!</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">User Guide</li><li class="chapter-item expanded "><a href="../../../chapter_1/hello_world.generated_docs.html"><strong aria-hidden="true">1.</strong> Hello, World</a></li><li class="chapter-item expanded "><a href="../../../getting_started/getting_started.html"><strong aria-hidden="true">2.</strong> Getting Started!</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../getting_started/understanding_starter_project/understanding_starter_project.generated_docs.html"><strong aria-hidden="true">2.1.</strong> Understanding the Starter Project</a></li><li class="chapter-item expanded "><a href="../../../getting_started/first_program/first_program.generated_docs.html"><strong aria-hidden="true">2.2.</strong> Your First Program</a></li><li class="chapter-item expanded "><a href="../../../getting_started/intro_to_modules/intro_to_modules.generated_docs.html"><strong aria-hidden="true">2.3.</strong> Intro to Modules</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">Reference Guide</li><li class="chapter-item expanded "><a href="../../../common_programming_concepts.html"><strong aria-hidden="true">3.</strong> Common Programming Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../common_programming_concepts/variables_and_types/variables_and_types.generated_docs.html"><strong aria-hidden="true">3.1.</strong> Variables & Primitive Types</a></li><li class="chapter-item expanded "><a href="../../../common_programming_concepts/sep_var_decl_and_init/sep_var_decl_and_init.generated_docs.html"><strong aria-hidden="true">3.2.</strong> Separate Variable Declaration & Initialization</a></li><li class="chapter-item expanded "><a href="../../../common_programming_concepts/var_reassignment/var_reassignment.generated_docs.html"><strong aria-hidden="true">3.3.</strong> Variable Reassignment</a></li><li class="chapter-item expanded "><a href="../../../common_programming_concepts/string_formatting/string_formatting.generated_docs.html"><strong aria-hidden="true">3.4.</strong> String Formatting</a></li><li class="chapter-item expanded "><a href="../../../control_flow.html"><strong aria-hidden="true">3.5.</strong> Control Flow</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../control_flow/if_else/if_else.generated_docs.html"><strong aria-hidden="true">3.5.1.</strong> If-Else</a></li><li class="chapter-item expanded "><a href="../../../control_flow/while/while.generated_docs.html"><strong aria-hidden="true">3.5.2.</strong> While</a></li><li class="chapter-item expanded "><a href="../../../control_flow/for/for.generated_docs.html"><strong aria-hidden="true">3.5.3.</strong> For</a></li><li class="chapter-item expanded "><a href="../../../control_flow/repeat/repeat.generated_docs.html"><strong aria-hidden="true">3.5.4.</strong> Repeat</a></li><li class="chapter-item expanded "><a href="../../../control_flow/pipes/pipes.generated_docs.html"><strong aria-hidden="true">3.5.5.</strong> Pipes</a></li><li class="chapter-item expanded "><a href="../../../control_flow/match/match.generated_docs.html"><strong aria-hidden="true">3.5.6.</strong> Pattern Matching</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../control_flow/match/structed_data/structured_data.generated_docs.html"><strong aria-hidden="true">3.5.6.1.</strong> Matching Structured Data</a></li><li class="chapter-item expanded "><a href="../../../control_flow/match/wildcards/wildcards.generated_docs.html"><strong aria-hidden="true">3.5.6.2.</strong> Wildcard Patterns</a></li><li class="chapter-item expanded "><a href="../../../control_flow/match/exhaustiveness_checks/exhaustiveness_checks.generated_docs.html"><strong aria-hidden="true">3.5.6.3.</strong> Static Exhaustiveness Checks</a></li></ol></li><li class="chapter-item expanded "><a href="../../../control_flow/collection_comprehension/collection_comprehension.generated_docs.html"><strong aria-hidden="true">3.5.7.</strong> Collection Comprehension</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../control_flow/collection_comprehension/more_than_syntax_sugar/more_than_syntax_sugar.generated_docs.html"><strong aria-hidden="true">3.5.7.1.</strong> Comprehension is More Than Syntax Sugar</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../static_typing/static_typing.generated_docs.html"><strong aria-hidden="true">4.</strong> Types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../static_typing/builtin_colls/builtin_collections.generated_docs.html"><strong aria-hidden="true">4.1.</strong> Builtin Collections</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../static_typing/builtin_colls/list_type/list_type.generated_docs.html"><strong aria-hidden="true">4.1.1.</strong> Lists</a></li><li class="chapter-item expanded "><a href="../../../static_typing/builtin_colls/set_type/set_type.generated_docs.html"><strong aria-hidden="true">4.1.2.</strong> Sets</a></li><li class="chapter-item expanded "><a href="../../../static_typing/builtin_colls/map_type/map_type.generated_docs.html"><strong aria-hidden="true">4.1.3.</strong> Maps</a></li><li class="chapter-item expanded "><a href="../../../static_typing/builtin_colls/tuple_type/tuple_type.generated_docs.html"><strong aria-hidden="true">4.1.4.</strong> Tuples</a></li><li class="chapter-item expanded "><a href="../../../static_typing/builtin_colls/struct_type/struct_type.generated_docs.html"><strong aria-hidden="true">4.1.5.</strong> Structs</a></li></ol></li><li class="chapter-item expanded "><a href="../../../static_typing/oneofs/oneofs.generated_docs.html"><strong aria-hidden="true">4.2.</strong> Oneofs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../static_typing/oneofs/narrowing/narrowing.generated_docs.html"><strong aria-hidden="true">4.2.1.</strong> "Narrowing" / Type Guards</a></li></ol></li><li class="chapter-item expanded "><a href="../../../static_typing/atoms/atoms.generated_docs.html"><strong aria-hidden="true">4.3.</strong> Atoms</a></li><li class="chapter-item expanded "><a href="../../../static_typing/aliases/aliases.generated_docs.html"><strong aria-hidden="true">4.4.</strong> Aliases</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../static_typing/aliases/not_a_new_type_decl/not_a_new_type_decl.generated_docs.html"><strong aria-hidden="true">4.4.1.</strong> Aliases are Not a New Type Declaration</a></li></ol></li><li class="chapter-item expanded "><a href="../../../static_typing/user_defined_types/user_defined_types.generated_docs.html"><strong aria-hidden="true">4.5.</strong> User Defined Types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../static_typing/user_defined_types/parameterized_types/parameterized_types.generated_docs.html"><strong aria-hidden="true">4.5.1.</strong> Parameterized Types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../static_typing/user_defined_types/parameterized_types/concrete_type_inference/concrete_type_inference.generated_docs.html"><strong aria-hidden="true">4.5.1.1.</strong> Concrete Type Inference</a></li></ol></li><li class="chapter-item expanded "><a href="../../../static_typing/user_defined_types/recursive_types/recursive_types.generated_docs.html"><strong aria-hidden="true">4.5.2.</strong> Recursive Types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../static_typing/user_defined_types/recursive_types/impossible_recursive_types/impossible_recursive_types.generated_docs.html"><strong aria-hidden="true">4.5.2.1.</strong> Impossible Recursive Types</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../type_inference/type_inference.generated_docs.html"><strong aria-hidden="true">5.</strong> Type Inference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../type_inference/required_type_annotations/required_type_annotations.generated_docs.html"><strong aria-hidden="true">5.1.</strong> Required Type Annotations</a></li></ol></li><li class="chapter-item expanded "><a href="../../../procedures.html"><strong aria-hidden="true">6.</strong> Procedures</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../procedures/functions/functions.generated_docs.html"><strong aria-hidden="true">6.1.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../../../procedures/consumers/consumers.generated_docs.html"><strong aria-hidden="true">6.2.</strong> Consumers</a></li><li class="chapter-item expanded "><a href="../../../procedures/providers/providers.generated_docs.html"><strong aria-hidden="true">6.3.</strong> Providers</a></li></ol></li><li class="chapter-item expanded "><a href="../../../lambdas_and_first_class_procedures/lambdas_and_first_class_procedures.generated_docs.html"><strong aria-hidden="true">7.</strong> Lambdas & First Class Procedures</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../lambdas_and_first_class_procedures/lambda_closures/lambda_closures.generated_docs.html"><strong aria-hidden="true">7.1.</strong> Lambdas are Restricted "Closures"</a></li></ol></li><li class="chapter-item expanded "><a href="../../../error_handling/error_handling.generated_docs.html"><strong aria-hidden="true">8.</strong> Error Handling</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../error_handling/error_propagation/error_propagation.generated_docs.html"><strong aria-hidden="true">8.1.</strong> Error Propagation</a></li></ol></li><li class="chapter-item expanded "><a href="../../../generics.generated_docs.html"><strong aria-hidden="true">9.</strong> Generics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../generics/contracts/contracts.generated_docs.html"><strong aria-hidden="true">9.1.</strong> Contracts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../generics/contracts/implementing_contracts/implementing_contracts.generated_docs.html"><strong aria-hidden="true">9.1.1.</strong> Implementing a Contract</a></li><li class="chapter-item expanded "><a href="../../../generics/contracts/multiple_type_params/multiple_type_params.generated_docs.html"><strong aria-hidden="true">9.1.2.</strong> Multiple Type Params</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../generics/contracts/multiple_type_params/implied_types/implied_types.generated_docs.html"><strong aria-hidden="true">9.1.2.1.</strong> (Advanced) Implied Types</a></li></ol></li><li class="chapter-item expanded "><a href="../../../generics/contracts/dynamic_dispatch/dynamic_dispatch.generated_docs.html" class="active"><strong aria-hidden="true">9.1.3.</strong> Dynamic Dispatch</a></li></ol></li><li class="chapter-item expanded "><a href="../../../generics/generic_return_type_inference/generic_return_type_inference.generated_docs.html"><strong aria-hidden="true">9.2.</strong> Generic Return Type Inference</a></li></ol></li><li class="chapter-item expanded "><a href="../../../copying/copying.generated_docs.html"><strong aria-hidden="true">10.</strong> Copying Data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../copying/mutability_coercion/mutability_coercion.generated_docs.html"><strong aria-hidden="true">10.1.</strong> Mutability Coercion on Copy</a></li><li class="chapter-item expanded "><a href="../../../copying/performance/performance.generated_docs.html"><strong aria-hidden="true">10.2.</strong> Performance Optimizations</a></li><li class="chapter-item expanded "><a href="../../../copying/known_bugs/known_bugs.generated_docs.html"><strong aria-hidden="true">10.3.</strong> Known Copy Bugs</a></li></ol></li><li class="chapter-item expanded "><a href="../../../resource_files/resource_files.generated_docs.html"><strong aria-hidden="true">11.</strong> Resource Files</a></li><li class="chapter-item expanded "><a href="../../../module_system/module_system.generated_docs.html"><strong aria-hidden="true">12.</strong> Module System</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../module_system/module_apis/module_apis.generated_docs.html"><strong aria-hidden="true">12.1.</strong> Module APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../module_system/module_apis/procedure_signatures/procedure_signatures.generated_docs.html"><strong aria-hidden="true">12.1.1.</strong> Procedure Signatures</a></li><li class="chapter-item expanded "><a href="../../../module_system/module_apis/type_definitions/type_definitions.generated_docs.html"><strong aria-hidden="true">12.1.2.</strong> Type & Alias Definitions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../module_system/module_apis/type_definitions/initializers_and_unwrappers/initializers_and_unwrappers.generated_docs.html"><strong aria-hidden="true">12.1.2.1.</strong> Initializers</a></li><li class="chapter-item expanded "><a href="../../../module_system/module_apis/type_definitions/initializers_and_unwrappers/unwrappers/unwrappers.generated_docs.html"><strong aria-hidden="true">12.1.2.2.</strong> Unwrappers</a></li><li class="chapter-item expanded "><a href="../../../module_system/module_apis/type_definitions/opaque_types/opaque_types.generated_docs.html"><strong aria-hidden="true">12.1.2.3.</strong> Opaque Types</a></li></ol></li><li class="chapter-item expanded "><a href="../../../module_system/module_apis/static_values/static_values.generated_docs.html"><strong aria-hidden="true">12.1.3.</strong> Static Values</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../module_system/module_apis/flags/flags.generated_docs.html"><strong aria-hidden="true">12.1.3.1.</strong> Flags</a></li></ol></li><li class="chapter-item expanded "><a href="../../../module_system/module_apis/http_services/http_services.generated_docs.html"><strong aria-hidden="true">12.1.4.</strong> HTTP Services</a></li></ol></li><li class="chapter-item expanded "><a href="../../../module_system/visibility/visibility.generated_docs.html"><strong aria-hidden="true">12.2.</strong> Visibility</a></li><li class="chapter-item expanded "><a href="../../../module_system/swapping_deps/swapping_deps.generated_docs.html"><strong aria-hidden="true">12.3.</strong> Swapping Dependencies</a></li></ol></li><li class="chapter-item expanded "><a href="../../../concurrency.html"><strong aria-hidden="true">13.</strong> Concurrency</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../graph_procedures/graph_procedures.generated_docs.html"><strong aria-hidden="true">13.1.</strong> Graph Procedures</a></li><li class="chapter-item expanded "><a href="../../../graph_procedures/graph_procedure_composition/graph_procedure_composition.generated_docs.html"><strong aria-hidden="true">13.2.</strong> Graph Procedure Composition</a></li><li class="chapter-item expanded "><a href="../../../graph_procedures/calling_graph_procedures/calling_graph_procedures.generated_docs.html"><strong aria-hidden="true">13.3.</strong> Calling Graph Procedures</a></li><li class="chapter-item expanded "><a href="../../../graph_procedures/conditional_subgraph_execution/conditional_subgraph_execution.generated_docs.html"><strong aria-hidden="true">13.4.</strong> (Advanced) Conditional Subgraph Execution</a></li></ol></li><li class="chapter-item expanded "><a href="../../../fearless_concurrency/fearless_concurrency.html"><strong aria-hidden="true">14.</strong> Fearless Concurrency</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../guaranteed_data_race_free/guaranteed_data_race_free.generated_docs.html"><strong aria-hidden="true">14.1.</strong> Guaranteed Data-Race-Free Concurrency</a></li><li class="chapter-item expanded "><a href="../../../guaranteed_deadlock_free.html"><strong aria-hidden="true">14.2.</strong> Guaranteed Deadlock-Free Concurrency</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../guaranteed_deadlock_free/blocking_procedures/blocking_procedures.generated_docs.html"><strong aria-hidden="true">14.2.1.</strong> Blocking Procedures</a></li><li class="chapter-item expanded "><a href="../../../guaranteed_deadlock_free/re_what_color_is_your_function.generated_docs.html"><strong aria-hidden="true">14.2.2.</strong> Re: "What Color is Your Function?"</a></li><li class="chapter-item expanded "><a href="../../../guaranteed_deadlock_free/re_what_color_is_your_function/blocking_generics.generated_docs.html"><strong aria-hidden="true">14.2.3.</strong> (Advanced) Blocking Generics</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../http_servers/http_servers.generated_docs.html"><strong aria-hidden="true">15.</strong> Basic HTTP Servers</a></li><li class="chapter-item expanded "><a href="../../../json_parsing/json_parsing.generated_docs.html"><strong aria-hidden="true">16.</strong> JSON Parsing</a></li><li class="chapter-item expanded "><a href="../../../metaprogramming/metaprogramming.generated_docs.html"><strong aria-hidden="true">17.</strong> Build Time Metaprogramming</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../metaprogramming/templating/templating.generated_docs.html"><strong aria-hidden="true">17.1.</strong> Source Code Templates</a></li><li class="chapter-item expanded "><a href="../../../metaprogramming/code_reuse/code_reuse.generated_docs.html"><strong aria-hidden="true">17.2.</strong> (Literal) Code Reuse</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../metaprogramming/code_reuse/reusing_module_apis/reusing_module_apis.generated_docs.html"><strong aria-hidden="true">17.2.1.</strong> Reusing Module APIs</a></li><li class="chapter-item expanded "><a href="../../../metaprogramming/code_reuse/reusing_source_code/reusing_source_code.generated_docs.html"><strong aria-hidden="true">17.2.2.</strong> Reusing Source Code</a></li><li class="chapter-item expanded "><a href="../../../metaprogramming/code_reuse/abstract_modules/abstract_modules.generated_docs.html"><strong aria-hidden="true">17.2.3.</strong> Abstract Modules</a></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item expanded "><li class="part-title">StdLib</li><li class="chapter-item expanded "><a href="../../../stdlib/default_modules/default_modules.generated_docs.html"><strong aria-hidden="true">18.</strong> Default Modules</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../stdlib/booleans_module.generated_docs.html"><strong aria-hidden="true">18.1.</strong> booleans</a></li><li class="chapter-item expanded "><a href="../../../stdlib/deque_module.generated_docs.html"><strong aria-hidden="true">18.2.</strong> deque</a></li><li class="chapter-item expanded "><a href="../../../stdlib/doubles_module.generated_docs.html"><strong aria-hidden="true">18.3.</strong> doubles</a></li><li class="chapter-item expanded "><a href="../../../stdlib/files_module.generated_docs.html"><strong aria-hidden="true">18.4.</strong> files</a></li><li class="chapter-item expanded "><a href="../../../stdlib/floats_module.generated_docs.html"><strong aria-hidden="true">18.5.</strong> floats</a></li><li class="chapter-item expanded "><a href="../../../stdlib/futures_module.generated_docs.html"><strong aria-hidden="true">18.6.</strong> futures</a></li><li class="chapter-item expanded "><a href="../../../stdlib/fp_module.generated_docs.html"><strong aria-hidden="true">18.7.</strong> fp</a></li><li class="chapter-item expanded "><a href="../../../stdlib/ints_module.generated_docs.html"><strong aria-hidden="true">18.8.</strong> ints</a></li><li class="chapter-item expanded "><a href="../../../stdlib/lists_module.generated_docs.html"><strong aria-hidden="true">18.9.</strong> lists</a></li><li class="chapter-item expanded "><a href="../../../stdlib/longs_module.generated_docs.html"><strong aria-hidden="true">18.10.</strong> longs</a></li><li class="chapter-item expanded "><a href="../../../stdlib/maps_module.generated_docs.html"><strong aria-hidden="true">18.11.</strong> maps</a></li><li class="chapter-item expanded "><a href="../../../stdlib/math_module.generated_docs.html"><strong aria-hidden="true">18.12.</strong> math</a></li><li class="chapter-item expanded "><a href="../../../stdlib/priority_queue_module.generated_docs.html"><strong aria-hidden="true">18.13.</strong> priority_queue</a></li><li class="chapter-item expanded "><a href="../../../stdlib/random_module.generated_docs.html"><strong aria-hidden="true">18.14.</strong> random</a></li><li class="chapter-item expanded "><a href="../../../stdlib/scanner_module.generated_docs.html"><strong aria-hidden="true">18.15.</strong> scanner</a></li><li class="chapter-item expanded "><a href="../../../stdlib/sets_module.generated_docs.html"><strong aria-hidden="true">18.16.</strong> sets</a></li><li class="chapter-item expanded "><a href="../../../stdlib/std_module.generated_docs.html"><strong aria-hidden="true">18.17.</strong> std</a></li><li class="chapter-item expanded "><a href="../../../stdlib/strings_module.generated_docs.html"><strong aria-hidden="true">18.18.</strong> strings</a></li><li class="chapter-item expanded "><a href="../../../stdlib/string_builder_module.generated_docs.html"><strong aria-hidden="true">18.19.</strong> string_builder</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Claro Programming Language (DRAFT)</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/JasonSteving99/claro-lang/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="dynamic-dispatch"><a class="header" href="#dynamic-dispatch">Dynamic Dispatch</a></h1>
<p>&quot;Dynamic Dispatch&quot; is a fancy term for a call to an overloaded procedure (one with multiple implementations whose 
signatures differ only in the types of args/return value) being routed (a.k.a. &quot;dispatched&quot;) to the appropriate
implementation <strong>based on type information solely available at runtime</strong>. </p>
<h2 id="tldr"><a class="header" href="#tldr">TLDR;</a></h2>
<p>The short version of this section is that Claro supports the following:</p>
<h4 id="fig-1"><a class="header" href="#fig-1"><em>Fig 1:</em></a></h4>
<hr />
<pre><code class="language-claro">requires(Stringify&lt;T&gt;)
consumer prettyPrintList&lt;T&gt;(l: [T]) {
  for (e in l) {
    print(Stringify::displayStr(e));
  }
}

var elems: [oneof&lt;Foo, Bar, Buzz&gt;] = [Foo(1234), Bar(&quot;some string&quot;), Buzz(&quot;another&quot;)];
prettyPrintList(elems);
<span class="boring">
</span><span class="boring">contract Stringify&lt;T&gt; {
</span><span class="boring">  function displayStr(t: T) -&gt; string;
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">newtype Foo : int
</span><span class="boring">implement Stringify&lt;Foo&gt; {
</span><span class="boring">  function displayStr(t: Foo) -&gt; string {
</span><span class="boring">    var boundingLine = strings::repeated(&quot;*&quot;, len(&quot;{unwrap(t)}&quot;) + len(&quot;* Foo() *&quot;));
</span><span class="boring">    return &quot;{boundingLine}\n* {t} *\n{boundingLine}&quot;;
</span><span class="boring">  }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">newtype Bar : string
</span><span class="boring">implement Stringify&lt;Bar&gt; {
</span><span class="boring">  function displayStr(t: Bar) -&gt; string {
</span><span class="boring">    var boundingLine = strings::repeated(&quot;-&quot;, len(unwrap(t)) + len(&quot;| Bar() |&quot;));
</span><span class="boring">    return &quot;{boundingLine}\n| {t} |\n{boundingLine}&quot;;
</span><span class="boring">  }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">newtype Buzz : string
</span><span class="boring">implement Stringify&lt;Buzz&gt; {
</span><span class="boring">  function displayStr(t: Buzz) -&gt; string {
</span><span class="boring">    var boundingLine = strings::repeated(&quot;#&quot;, len(unwrap(t)) + len(&quot;# Buzz() #&quot;));
</span><span class="boring">    return &quot;{boundingLine}\n# {t} #\n{boundingLine}&quot;;
</span><span class="boring">  }
</span><span class="boring">}
</span></code></pre>
<p><em>Output:</em></p>
<pre><code>[0.001s][warning][perf,memops] Cannot use file /tmp/hsperfdata_runner/6 because it is locked by another process (errno = 11)
*************
* Foo(1234) *
*************
--------------------
| Bar(some string) |
--------------------
#################
# Buzz(another) #
#################
</code></pre>
<hr />
<p><em>Feel free to ponder how this works. But keep reading if it's not immediately obvious what's going on here.</em></p>
<h2 id="by-comparison-to-object-oriented-programming"><a class="header" href="#by-comparison-to-object-oriented-programming">By Comparison to Object-Oriented Programming</a></h2>
<div class="warning">
<b>This entire section is intended to build up your intuition for Claro's approach to Dynamic Dispatch by comparing and
contrasting with Java.</b>
<p><a href="#dynamic-dispatch">Skip ahead TODO(steving) Add link</a> if you're already familiar with the concept of Dynamic Dispatch,
or keep reading for something of a deep dive.</p>
</div>
<p>Claro is truly a procedural language, and so is philosophically opposed to the personification of data that is a
fundamental property of &quot;Object-Oriented&quot; programming (OOP) languages like Java/Python/C++/etc. So, you won't find
anything resembling &quot;Objects&quot; or &quot;Classes&quot; in Claro. Additionally, Claro is philosophically opposed to the complexity of
inheritance, so again Claro's type system does not support it.</p>
<p>However, though Claro takes issue with the path OOP takes to achieve it, the paradigm provides some obviously useful 
abstractions that help programmers write very expressive code. Of particular interest in this section is the ability to 
write code that treats values of distinct types <em>interchangeably</em> for the sake of dispatching to procedures that are 
known to be implemented over each of the distinct types in question.</p>
<p>In a language like Java, you'll accomplish this either by using <em>interfaces</em>, or by creating <em>subtype relationships 
between types using inheritance</em>.</p>
<h3 id="using-an-interface-type-as-a-procedure-arg-in-an-oop-language"><a class="header" href="#using-an-interface-type-as-a-procedure-arg-in-an-oop-language">Using an Interface &quot;Type&quot; as a Procedure Arg (<em>in an OOP language</em>)</a></h3>
<p>For example, the below <strong>Java</strong> code defines an interface with a single &quot;method&quot; that three classes implement.</p>
<h4 id="fig-2"><a class="header" href="#fig-2"><em>Fig 2:</em></a></h4>
<hr />
<pre><code class="language-java">/*** JAVA ***/
<span class="boring">import java.util.List;
</span><span class="boring">import java.util.ArrayList;
</span><span class="boring">import java.lang.StringBuilder;
</span><span class="boring">
</span>interface Stringify {
  String displayStr();
}
<span class="boring">
</span>class Foo implements Stringify {
  // ...
<span class="boring">  private final int wrapped;
</span><span class="boring">  public Foo(int wrapped) {
</span><span class="boring">    this.wrapped = wrapped;
</span><span class="boring">  }
</span><span class="boring">
</span>  @Override
  public String displayStr() {
    // ...
<span class="boring">    String boundingLine = Util.repeated('*', String.valueOf(this.wrapped).length() + &quot;* Foo() *&quot;.length());
</span><span class="boring">    return String.format(&quot;%s\n* Foo(%s) *\n%s&quot;, boundingLine, this.wrapped, boundingLine);
</span>  }
}
<span class="boring">
</span>class Bar implements Stringify {
  // ...
<span class="boring">  private final String wrapped;
</span><span class="boring">  public Bar(String wrapped) {
</span><span class="boring">    this.wrapped = wrapped;
</span><span class="boring">  }
</span><span class="boring">
</span>  @Override
  public String displayStr() {
    // ...
<span class="boring">    String boundingLine = Util.repeated('-', this.wrapped.length() + &quot;| Bar() |&quot;.length());
</span><span class="boring">    return String.format(&quot;%s\n| Foo(%s) |\n%s&quot;, boundingLine, this.wrapped, boundingLine);
</span>  }
}
<span class="boring">
</span>class Buzz implements Stringify {
  // ...
<span class="boring">  private final String wrapped;
</span><span class="boring">  public Buzz(String wrapped) {
</span><span class="boring">    this.wrapped = wrapped;
</span><span class="boring">  }
</span><span class="boring">
</span>  @Override
  public String displayStr() {
    // ...
<span class="boring">    String boundingLine = Util.repeated('#', this.wrapped.length() + &quot;# Buzz() #&quot;.length());
</span><span class="boring">    return String.format(&quot;%s\n# Buzz(%s) #\n%s&quot;, boundingLine, this.wrapped, boundingLine);
</span>  }
}
<span class="boring">
</span><span class="boring">class Util {
</span><span class="boring">  public static String repeated(char c, int n) {
</span><span class="boring">    StringBuilder sb = new StringBuilder();
</span><span class="boring">    for (; n &gt; 0; n--) {
</span><span class="boring">      sb.append(c);
</span><span class="boring">    }
</span><span class="boring">    return sb.toString();
</span><span class="boring">  }
</span><span class="boring">}
</span><span class="boring">
</span></code></pre>
<hr />
<p>And so a <strong>Java</strong> programmer can write a method that accepts an argument of type <code>Stringify</code>... but in <strong>Java</strong> parlance
any type that <em>implements</em> the <code>Stringify</code> interface can be considered a <strong>subtype</strong> of <code>Stringify</code> and passed in its 
place:</p>
<h4 id="fig-3"><a class="header" href="#fig-3"><em>Fig 3:</em></a></h4>
<hr />
<pre><code class="language-java">/*** JAVA ***/
public class Demo {
  public static void main(String... args) {
    // Foo, Bar, and Buzz are all &quot;subtypes&quot; of Stringify.
    prettyPrint(new Foo(1234));
    prettyPrint(new Bar(&quot;some string&quot;));
    prettyPrint(new Buzz(&quot;another&quot;));
  }

  static void prettyPrint(Stringify x) {
    System.out.println(x.displayStr());
  }
}
</code></pre>
<hr />
<p>This is a very convenient abstraction. However, in Java this <strong>single</strong> method implementation must handle multiple 
possible concrete subtypes of <code>Stringify</code> (in this case <code>Foo</code>, <code>Bar</code>, and <code>Buzz</code>). Java addresses this by dispatching to
the correct implementation of the <code>displayStr()</code> method <strong>at runtime</strong>, by dynamically checking the actual concrete type
of the object currently being handled. <strong>This is already an example of Dynamic Dispatch. In Java, Dynamic Dispatch
is the norm</strong>.</p>
<h3 id="requiring-a-contract-to-be-implemented-over-generic-type-params-in-claro"><a class="header" href="#requiring-a-contract-to-be-implemented-over-generic-type-params-in-claro">Requiring a Contract to Be Implemented Over Generic Type Params (In Claro)</a></h3>
<p>But subtyping is by no means essential for this to be possible. By now you've already seen that 
<a href="../contracts.generated_docs.html">Contracts</a> provide a mechanism to express the same thing without resorting to creating
any subtyping relationships between types.</p>
<h4 id="fig-4"><a class="header" href="#fig-4"><em>Fig 4:</em></a></h4>
<hr />
<pre><code class="language-claro">#### CLARO ####
prettyPrint(Foo(1234));
prettyPrint(Bar(&quot;some string&quot;));
prettyPrint(Buzz(&quot;another&quot;));

requires(Stringify&lt;T&gt;)
consumer prettyPrint&lt;T&gt;(t: T) {
  print(Stringify::displayStr(t));
}
<span class="boring">
</span><span class="boring">contract Stringify&lt;T&gt; {
</span><span class="boring">  function displayStr(t: T) -&gt; string;
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">newtype Foo : int
</span><span class="boring">implement Stringify&lt;Foo&gt; {
</span><span class="boring">  function displayStr(t: Foo) -&gt; string {
</span><span class="boring">    var boundingLine = strings::repeated(&quot;*&quot;, len(&quot;{unwrap(t)}&quot;) + len(&quot;* Foo() *&quot;));
</span><span class="boring">    return &quot;{boundingLine}\n* {t} *\n{boundingLine}&quot;;
</span><span class="boring">  }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">newtype Bar : string
</span><span class="boring">implement Stringify&lt;Bar&gt; {
</span><span class="boring">  function displayStr(t: Bar) -&gt; string {
</span><span class="boring">    var boundingLine = strings::repeated(&quot;-&quot;, len(unwrap(t)) + len(&quot;| Bar() |&quot;));
</span><span class="boring">    return &quot;{boundingLine}\n| {t} |\n{boundingLine}&quot;;
</span><span class="boring">  }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">newtype Buzz : string
</span><span class="boring">implement Stringify&lt;Buzz&gt; {
</span><span class="boring">  function displayStr(t: Buzz) -&gt; string {
</span><span class="boring">    var boundingLine = strings::repeated(&quot;#&quot;, len(unwrap(t)) + len(&quot;# Buzz() #&quot;));
</span><span class="boring">    return &quot;{boundingLine}\n# {t} #\n{boundingLine}&quot;;
</span><span class="boring">  }
</span><span class="boring">}
</span></code></pre>
<p><em>Output:</em></p>
<pre><code>*************
* Foo(1234) *
*************
--------------------
| Bar(some string) |
--------------------
#################
# Buzz(another) #
#################
</code></pre>
<hr />
<p>And additionally, as Claro's 
<a href="../implementing_contracts/implementing_contracts.generated_docs.html#a-note-on-static-dispatch-via-monomorphization">generic procedures are &quot;monomorphized&quot;</a>,
there is actually <strong>no Dynamic Dispatch going on in the above example</strong>. And when you stop and think about it, why would
there be? As a human looking at the three calls to <code>prettyPrint(...)</code>, there's zero uncertainty of the types in 
question. Unlike in the Java case, the Claro compiler actually takes advantage of this type information as well to 
generate code that <strong>statically dispatches</strong> to the correct implementations without requiring any runtime type checks.</p>
<h3 id="a-not-so-brief-aside-on-the-limitations-of-subtyping"><a class="header" href="#a-not-so-brief-aside-on-the-limitations-of-subtyping">A (Not So) Brief Aside on the Limitations of Subtyping</a></h3>
<p>You may be thinking that Java's use of subtyping makes the language simpler because it allows you to avoid the use of
Generics, but this is debatable at best. Consider a very slightly modified version of the above <code>prettyPrint()</code> function
that instead takes two arguments:</p>
<h4 id="fig-5"><a class="header" href="#fig-5"><em>Fig 5:</em></a></h4>
<hr />
<pre><code class="language-java">/*** JAVA ***/
public class Demo {
  public static void main(String... args) {
    // Java allows **both** of these calls - whether you want this or not.
    prettyPrintPair(new Foo(1234), new Foo(56678));
    prettyPrintPair(new Foo(1234), new Bar(&quot;some string&quot;));
  }

  static void prettyPrintPair(Stringify x, Stringify y) {
    System.out.println(&quot;First:&quot; + x.displayStr());
    System.out.println(&quot;Second:&quot; + x.displayStr());
  }
}
</code></pre>
<hr />
<p>As it's currently defined, there's nothing requiring the two arguments to <em>actually</em> have the same type. In this trivial
example, that may be fine, but if I were to actually want to ensure that two arguments both implement an interface 
<strong><em>and</em></strong> they both actually have the same type, then I'm out of luck - <strong>there's no way to statically encode this 
constraint in Java!</strong></p>
<p>In Claro, you would simply write:</p>
<h4 id="fig-6"><a class="header" href="#fig-6"><em>Fig 6:</em></a></h4>
<hr />
<pre><code class="language-claro">#### CLARO ####
requires(Stringify&lt;T&gt;)
consumer prettyPrintPair&lt;T&gt;(x: T, y: T) {
  print(&quot;First:\n{Stringify::displayStr(x)}&quot;);
  print(&quot;Second:\n{Stringify::displayStr(y)}&quot;);
}
</code></pre>
<hr />
<p>And it will be a compilation error to pass arguments of different types:</p>
<h4 id="fig-7"><a class="header" href="#fig-7"><em>Fig 7:</em></a></h4>
<hr />
<pre><code class="language-claro">#### CLARO ####
prettyPrintPair(Foo(1234), Bar(&quot;some string&quot;));
</code></pre>
<p><em>Compilation Errors:</em></p>
<pre><code class="language-compilation-errs">dynamic_dispatch_EX7_example.claro:2: Invalid type:
	Found:
		Bar
	Expected:
		Foo
prettyPrintPair(Foo(1234), Bar(&quot;some string&quot;));
                           ^^^^^^^^^^^^^^^^^^
1 Error
</code></pre>
<hr />
<p>But yet it will still be completely valid to pass arguments of the same type just like we wanted:</p>
<h4 id="fig-8"><a class="header" href="#fig-8"><em>Fig 8:</em></a></h4>
<hr />
<pre><code class="language-claro">#### CLARO ####
prettyPrintPair(Foo(1234), Foo(5678));
print(&quot;&quot;);
prettyPrintPair(Bar(&quot;some string&quot;), Bar(&quot;another&quot;));
</code></pre>
<p><em>Output:</em></p>
<pre><code>First:
*************
* Foo(1234) *
*************
Second:
*************
* Foo(5678) *
*************

First:
--------------------
| Bar(some string) |
--------------------
Second:
----------------
| Bar(another) |
----------------
</code></pre>
<hr />
<p>And for the sake of completeness, Claro's generics <em>also</em> allow you to explicitly express that you would like to allow 
both arguments to potentially have different types:</p>
<h4 id="fig-9"><a class="header" href="#fig-9"><em>Fig 9:</em></a></h4>
<hr />
<pre><code class="language-claro">requires(Stringify&lt;T&gt;, Stringify&lt;V&gt;)
consumer prettyPrintPair&lt;T, V&gt;(x: T, y: V) {
  print(&quot;First:\n{Stringify::displayStr(x)}&quot;);
  print(&quot;Second:\n{Stringify::displayStr(y)}&quot;);
}

prettyPrintPair(Foo(1234), Bar(&quot;some string&quot;));
</code></pre>
<hr />
<p><em>*For the sake of transparency, as Claro's a WIP, there's actually currently an open compiler regression
that broke this functionality at the moment. TODO(steving) Fix this.</em></p>
<div class="warning">
<p><strong>HOT TAKE:</strong> While Java's support for subtyping may <strong><em>seem</em></strong> like a powerful tool (and sometimes it really is 
convenient), it's actually explicitly <strong><em>taking away type information</em></strong>. You in fact end up with a 
<strong><em>less expressive</em></strong> language as a result of depending on subtyping.</p>
</div>
<h2 id="values-of-unknown-type"><a class="header" href="#values-of-unknown-type">Values Of Unknown Type</a></h2>
<p>So far we've seen that Claro programs do not need to resort to Dynamic Dispatch in situations where the types are
actually statically guaranteed to be fixed. However, it's not that difficult to conceive of a situation where a specific
type cannot be known until runtime. </p>
<p>For example, consider a simple game where different units are dynamically created throughout the course of gameplay. It 
would be very convenient for the game to be able to implement drawing arbitrary units without being forced to resort to 
painstakingly hand-write rendering logic for each unit explicitly. In fact, the below video demonstrates a simple
Asteroids game written in Claro that accomplishes exactly that:</p>
<script async id="asciicast-633650" src="https://asciinema.org/a/633650.js" data-preload="true" data-start-at="9" data-autoplay="true" data-loop="true"></script>
<p>The game's implementation contains a function with the following signature that fully handles the game's rendering logic
(see the game's full implementation 
<a href="https://github.com/JasonSteving99/claro-lang/blob/d6177ff8719e894f709c42811bd0b7f0a3d6c4d9/examples/claro_programs/asteroids.claro#L121-L123">here</a>):</p>
<h4 id="fig-10"><a class="header" href="#fig-10"><em>Fig 10:</em></a></h4>
<hr />
<pre><code class="language-claro">contract Unit&lt;T&gt; {
  consumer move(t: T);
  function hasSpeedBoost(t: T) -&gt; boolean;
}

contract Render&lt;T&gt; {
  function render(t: T) -&gt; char;
  function getLoc(t: T) -&gt; Location;
}

requires(Unit&lt;T&gt;, Render&lt;T&gt;)
function gameTick&lt;T&gt;(gameUnits: mut [T], gameBoard: [mut [char]], spaceship: Spaceship, onlyUnitsWSpeedBoost: boolean)
    -&gt; tuple&lt;GameOverStatus, ExplosionCount&gt; {
<span class="boring">  # The full implementation is too long for these docs. For the full implementation, see:
</span><span class="boring">  # See https://github.com/JasonSteving99/claro-lang/blob/d6177ff8719e894f709c42811bd0b7f0a3d6c4d9/examples/claro_programs/asteroids.claro#L121-L123
</span>  # ...
  # Update unit locations.
  for (unit in gameUnits) {
    # ...
    Unit::move(unit);
  }
  # ...
  # Populate gameBoard.
  for (unit in gameUnits) {
    # ...
    gameBoard[loc.r][loc.c] = Render::render(unit);
  }
  # ...
}
</code></pre>
<hr />
<p>Looking more closely, the function accepts an argument <code>gameUnits: mut [T]</code> that contains all of the units, including
the asteroids, the player's ship, and any missiles that the player fired. This function is able to actually handle all
of these unit types without the programmer needing to hardcode any specific details about them explicitly because of the
<code>requires(Unit&lt;T&gt;, Render&lt;T&gt;)</code> constraint on the function that ensures that whatever is inside the <code>gameUnits</code> list,
all elements will certainly implement the specified contracts. As a result, the function is able to treat all elements
within the <code>gameUnits</code> list interchangeably, even though it has no knowledge whatsoever of what types are actually
represented within. </p>
<p>To make things even more interesting, the call (see 
<a href="https://github.com/JasonSteving99/claro-lang/blob/d6177ff8719e894f709c42811bd0b7f0a3d6c4d9/examples/claro_programs/asteroids.claro#L289">full source</a>
) to the <code>gameTick()</code> function, passes a <code>gameUnits</code> list defined to contain various different unit types:</p>
<h4 id="fig-11"><a class="header" href="#fig-11"><em>Fig 11:</em></a></h4>
<hr />
<pre><code class="language-claro">var gameUnits: mut [oneof&lt;Asteroid, Missile, Spaceship&gt;];
# ...
var gameTickRes = gameTick(gameUnits, ...);
</code></pre>
<hr />
<p>This goes to demonstrate that Claro is smart enough to actually understand that the type
<code>oneof&lt;Asteroid, Missile, Spaceship&gt;</code> satisfies the <code>requires(Unit&lt;T&gt;, Render&lt;T&gt;)</code> constraint, because each variant
implements the required contract (if any didn't, the call would be rejected with a compilation error).</p>
<p>This is Dynamic Dispatch! Because the call was made over types that can't be known until runtime, Claro generates code
that will perform the necessary type checks to dispatch to the appropriate procedures at runtime.</p>
<h2 id="dynamic-dispatch-is-rare"><a class="header" href="#dynamic-dispatch-is-rare">Dynamic Dispatch is Rare</a></h2>
<p>If you've made it this far, then congrats! You should have a deep understanding of Dynamic Dispatch in Claro! </p>
<p>The last thing to mention is that Dynamic Dispatch is <strong>very intentionally</strong> something that you have to explicitly opt
into in Claro. It is slower and more complicated than the typical Static Dispatch, and Claro has been carefully designed
to make Dynamic Dispatch a rare occurrence as it's actually only necessary in very specific, limited situations. Your
takeaway from this section should be that while it is very simple to achieve Dynamic Dispatch in Claro, it is actually
not a very common situation that you are very likely to run into on a regular basis. But when it does, Claro makes your
life easy.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../generics/contracts/multiple_type_params/implied_types/implied_types.generated_docs.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../../generics/generic_return_type_inference/generic_return_type_inference.generated_docs.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../generics/contracts/multiple_type_params/implied_types/implied_types.generated_docs.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../../generics/generic_return_type_inference/generic_return_type_inference.generated_docs.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../../mermaid@10.6.1.min.js"></script>
        <script src="../../../mermaid-init.js"></script>


    </div>
    </body>
</html>
